<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/0.3.18/peer.min.js"></script>
<script>
    var peer = null
    var lastPeerId = null
    var conn = null
    function initialize() {
        peer = new Peer(null, {
            debug: 2
        });
        peer.on('open', function (id) {
            if (peer.id === null) {
                console.log('Received null id from peer open');
                peer.id = lastPeerId;
            } else {
                lastPeerId = peer.id;
            }
            document.getElementById("showid").innerHTML=peer.id
        });

        peer.on('connection', function (c) {
            //alert("connect success")
        });

    }

    function connect()
    {
        var id = document.getElementById("connectid").value
        conn = peer.connect(id);
        conn.on('open', function(){
            // here you have conn.id
            //conn.send('hi 111!');
        });
        conn.on('error', function(){
            alert("error")
        });
        conn.on('data', function(data){
            // here you have conn.id
            alert(data)
        });
    }

    function send()
    {
        conn.send( document.getElementById("connectid").value)
    }

    initialize()
</script>

</head>
<button onclick="connect()">connect1</button>
<button onclick="send()">Send</button>
<p id="showid"></p>
<input id="connectid"/>

</body>
</html>